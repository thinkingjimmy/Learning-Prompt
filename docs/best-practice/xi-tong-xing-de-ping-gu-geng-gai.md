# 系统性的评估更改

训练模型时，如果能够量化性能指标，改进性能将变得更容易。在某些情况下，对提示进行修改可能会在少数个别示例上取得更好的性能，但在更具代表性的示例集上导致整体性能下降。因此，为确保某项更改对性能产生净正面影响，可能需要定义一个全面的测试套件（也称为 "eval"）。&#x20;

有时候，很难判断某种变化（如新指令或新设计）是让您的系统变得更好还是更糟。观察几个例子可能会暗示哪一个更好，但在小样本情况下，很难区分真正的改进与偶然的运气。也许这种变化对某些输入的性能有所帮助，但对其他输入的性能却有所损害。

有时候，很难判断某种变化（如新指令或新设计）是让您的系统变得更好还是更糟。观察几个例子可能会暗示哪一个更好，但在小样本情况下，很难区分真正的改进与偶然的运气。也许这种变化对某些输入的性能有所帮助，但对其他输入的性能却有所损害。

\
评估程序（或称为 "evals"）对于优化系统设计非常有用。好的评估程序具有以下特点：

1. 能代表实际使用情况（或至少多样化）
2. 包含大量测试用例以获得更大的统计效力（参见下表以获取指南）
3. 容易自动化或重复操作

<table><thead><tr><th width="167.5">需要检测的差异</th><th>95%置信度所需样本量</th></tr></thead><tbody><tr><td>30%</td><td>~10</td></tr><tr><td>10%</td><td>~100</td></tr><tr><td>3%</td><td>~1,000</td></tr><tr><td>1%</td><td>~10,000</td></tr></tbody></table>

输出的评估可以由计算机、人类或二者结合来完成。计算机可以使用客观标准（如只有一个正确答案的问题）以及一些主观或模糊标准自动化评估，其中模型输出由其他模型查询进行评估。[OpenAI Evals](https://github.com/openai/evals)是一个开源软件框架，提供了创建自动化评估的工具。

在存在多种可能输出的情况下，基于模型的评估可以很有用，而这些输出在质量上被认为是同样高的（例如，针对长答案的问题）。可以通过基于模型的评估实际评估的边界以及需要人类评估的内容之间的界限是模糊的，并且随着模型变得越来越强大，这个界限也在不断改变。我们鼓励进行实验，了解基于模型的评估对您的应用场景的适用性如何。

## 参照黄金标准答案评估模型输出

若你已经有了一个预先设定的“黄金标准答案”或“基准”，那么你可以根据模型的输出与这个黄金标准答案的接近程度来评估模型的性能。

例如，如果你在训练一个用于回答问题的模型，你可能已经有了一个由人类专家提供的黄金标准答案集，然后你可以通过比较模型的答案和这些黄金标准答案来评估模型的性能。

假设已知一个问题的正确答案应该涉及到一组特定的已知事实。那么我们可以使用模型查询来计算答案中包含了多少必要的事实。

提示语：

{% code overflow="wrap" %}
```
你将得到由三个引号分隔的文本，这应是对一个问题的答案。请检查以下信息是否直接包含在答案中：

- 尼尔·阿姆斯特朗是第一个登月的人。
- 尼尔·阿姆斯特朗第一次登月的日期是1969年7月21日。

对于每一个信息，请执行以下步骤：

1 - 重新陈述该信息。
2 - 从答案中引用最接近此信息的内容。
3 - 考虑一下，如果一个不了解这个主题的人读了这个引用，他是否能直接推断出这个信息。在做出决定之前，解释为什么可以或者为什么不可以。
4 - 如果第3步的答案是肯定的，那么写“是”，否则写“否”。

最后，计算出有多少个“是”的答案。将这个计数以{"计数": <插入计数> }的形式提供。

文本：
"""尼尔·阿姆斯特朗因为成为首位登上月球的人类而闻名于世。这一历史性的事件发生在1969年7月21日，阿波罗11号任务期间。"""
```
{% endcode %}

小语 4.0 回复：

{% code overflow="wrap" %}
```
1 - 重新陈述该信息：
尼尔·阿姆斯特朗是第一个登上月球的人。
尼尔·阿姆斯特朗在1969年7月21日首次登上月球。

2 - 从答案中引用最接近此信息的内容：
"尼尔·阿姆斯特朗因为成为首位登上月球的人类而闻名于世。"
"这一历史性的事件发生在1969年7月21日，阿波罗11号任务期间。"

3 - 考虑一下，如果一个不了解这个主题的人读了这个引用，他是否能直接推断出这个信息。
对于第一个引用，可以直接推断出尼尔·阿姆斯特朗是第一个登上月球的人，因为引用中明确提到了"首位登上月球的人类"。
对于第二个引用，可以直接推断出尼尔·阿姆斯特朗在1969年7月21日首次登上月球，因为引用中明确提到了"这一历史性的事件发生在1969年7月21日，阿波罗11号任务期间。"

4 - 如果第3步的答案是肯定的，那么写“是”，否则写“否”。
是
是

最后，计算出有多少个“是”的答案。将这个计数以{"计数": <插入计数> }的形式提供。
{"计数": 2}
```
{% endcode %}

<figure><img src="../.gitbook/assets/image(8).png" alt="" /><figcaption></figcaption></figure>

这是一个只满足一个条件的示例输入，提示语：

{% code overflow="wrap" %}
```
你将得到由三个引号分隔的文本，这应是对一个问题的答案。请检查以下信息是否直接包含在答案中：

- 尼尔·阿姆斯特朗是第一个登月的人。
- 尼尔·阿姆斯特朗第一次登月的日期是1969年7月21日。

对于每一个信息，请执行以下步骤：

1 - 重新陈述该信息。
2 - 从答案中引用最接近此信息的内容。
3 - 考虑一下，如果一个不了解这个主题的人读了这个引用，他是否能直接推断出这个信息。在做出决定之前，解释为什么可以或者为什么不可以。
4 - 如果第3步的答案是肯定的，那么写“是”，否则写“否”。

最后，计算出有多少个“是”的答案。将这个计数以{"计数": <插入计数> }的形式提供。

"""尼尔·阿姆斯特朗从登月舱走出来，成为第一个在月球上行走的人，创造了历史。"""
```
{% endcode %}

小语 4.0 回复：

```
1 - 重新陈述该信息：
- 尼尔·阿姆斯特朗成为了第一个在月球上行走的人。
- 尼尔·阿姆斯特朗在1969年7月21日第一次登上月球。

2 - 从答案中引用最接近此信息的内容：
- "尼尔·阿姆斯特朗从登月舱走出来，成为第一个在月球上行走的人，创造了历史。"

3 - 考虑一下，如果一个不了解这个主题的人读了这个引用，他是否能直接推断出这个信息。在做出决定之前，解释为什么可以或者为什么不可以。
- 对于第一个信息，可以直接推断出尼尔·阿姆斯特朗是第一个登月的人，因为引用中明确提到了“尼尔·阿姆斯特朗成为第一个在月球上行走的人”。
- 对于第二个信息，不能直接推断出尼尔·阿姆斯特朗第一次登月的日期是1969年7月21日，因为引用中没有提到具体的日期。

4 - 如果第3步的答案是肯定的，那么写“是”，否则写“否”。
- 是
- 否

最后，计算出有多少个“是”的答案。将这个计数以{"计数": <插入计数> }的形式提供。

{"计数": 1}
```

<figure><img src="../.gitbook/assets/image(53).png" alt="" /><figcaption></figcaption></figure>

这是一个没有满足条件的示例输入，提示语：

{% code overflow="wrap" %}
```
你将得到由三个引号分隔的文本，这应是对一个问题的答案。请检查以下信息是否直接包含在答案中：

- 尼尔·阿姆斯特朗是第一个登月的人。
- 尼尔·阿姆斯特朗第一次登月的日期是1969年7月21日。

对于每一个信息，请执行以下步骤：

1 - 重新陈述该信息。
2 - 从答案中引用最接近此信息的内容。
3 - 考虑一下，如果一个不了解这个主题的人读了这个引用，他是否能直接推断出这个信息。在做出决定之前，解释为什么可以或者为什么不可以。
4 - 如果第3步的答案是肯定的，那么写“是”，否则写“否”。

最后，计算出有多少个“是”的答案。将这个计数以{"计数": <插入计数> }的形式提供。

"""在69年的夏天，一次伟大的航行，
阿波罗11号，如传说中的勇士一般。
阿姆斯特朗踏出了一步，历史在此刻展开，
“这是人类的一小步，”他说，“但是为新世界的一大步。"""
```
{% endcode %}

小语 4.0 回复：

```
// Some code
```

这种基于模型的评估方式有许多可能的变体。请考虑以下变体，它跟踪候选答案与标准答案之间的重叠情况，并跟踪候选答案是否与标准答案的任何部分产生矛盾。

以下是一个例子，其中的答案虽然不够理想，但却并未与专家答案产生矛盾，提示语：

{% code overflow="wrap" %}
```
请按照以下步骤处理用户的输入。在进行下一步前，请详细复述每个步骤，例如：“步骤1：逐步推理...”。

步骤1：逐步推理提交的答案与专家答案中的信息是否为以下几种情况之一：不相交、完全相等、是子集（即提交的答案信息比专家答案少）、是超集（即提交的答案信息比专家答案多），或有部分交集（即有一些交集，但并非子集或超集）。

步骤2：逐步推理提交的答案是否与专家答案的任何部分产生矛盾。

步骤3：输出一个结构如下的JSON对象：{"重叠类型": "不相交" 或 "完全相等" 或 "是子集" 或 "是超集" 或 "有部分交集", "矛盾": "真" 或 "假"}。

用户输入：
"""
问题：“尼尔·阿姆斯特朗最为人所知的事件是什么？它在什么时候发生的？假设使用UTC时间。”

提交的答案：“他不是在月球上行走过吗？”

专家的答案：“尼尔·阿姆斯特朗最为人所知的是他成为第一个在月球上行走的人。这个历史性的事件发生在1969年7月21日。”
"""
```
{% endcode %}

小语 4.0 回复：

{% code overflow="wrap" %}
```
步骤1：逐步推理提交的答案与专家答案中的信息是否为以下几种情况之一：不相交、完全相等、是子集（即提交的答案信息比专家答案少）、是超集（即提交的答案信息比专家答案多），或有部分交集（即有一些交集，但并非子集或超集）。

在这个例子中，提交的答案与专家答案有部分交集。提交的答案提到了尼尔·阿姆斯特朗在月球上行走，而专家答案也提到了这一点。但是，提交的答案没有提到具体的日期，而专家答案提供了详细的日期。

步骤2：逐步推理提交的答案是否与专家答案的任何部分产生矛盾。

在这个例子中，提交的答案与专家答案没有产生矛盾。

步骤3：输出一个结构如下的JSON对象：{"重叠类型": "不相交" 或 "完全相等" 或 "是子集" 或 "是超集" 或 "有部分交集", "矛盾": "真" 或 "假"}。

在这个例子中，输出的JSON对象为：{"重叠类型": "有部分交集", "矛盾": "假"}。
```
{% endcode %}

<figure><img src="../.gitbook/assets/image(63).png" alt="" /><figcaption></figcaption></figure>

这是一个带有答案的示例输入，直接与专家答案相矛盾，提示语：

{% code overflow="wrap" %}
```
请按照以下步骤处理用户的输入。在进行下一步前，请详细复述每个步骤，例如：“步骤1：逐步推理...”。

步骤1：逐步推理提交的答案与专家答案中的信息是否为以下几种情况之一：不相交、完全相等、是子集（即提交的答案信息比专家答案少）、是超集（即提交的答案信息比专家答案多），或有部分交集（即有一些交集，但并非子集或超集）。

步骤2：逐步推理提交的答案是否与专家答案的任何部分产生矛盾。

步骤3：输出一个结构如下的JSON对象：{"重叠类型": "不相交" 或 "完全相等" 或 "是子集" 或 "是超集" 或 "有部分交集", "矛盾": "真" 或 "假"}。

用户输入：
"""
问题：“尼尔·阿姆斯特朗最为人所知的事件是什么？它在什么时候发生的？假设使用UTC 时间。”

提交的答案：“1969年7月21日，尼尔·阿姆斯特朗成为了继巴兹·奥尔德林之后的第二个在月球上行走的人。”

专家的答案：“尼尔·阿姆斯特朗最为人所知的是他成为第一个在月球上行走的人。这个历史性的事件发生在1969年7月21日。”
"""
```
{% endcode %}

小语 4.0 回复：

{% code overflow="wrap" %}
```
步骤1：逐步推理提交的答案与专家答案的关系。在这个例子中，提交的答案与专家答案有部分交集。因为它们都提到了尼尔·阿姆斯特朗在月球上行走的事件和发生的时间，但提交的答案错误地将尼尔·阿姆斯特朗描述为第二个在月球上行走的人。

步骤2：逐步推理提交的答案是否与专家答案的任何部分产生矛盾。在这个例子中，提交的答案与专家答案产生了矛盾，因为它错误地将尼尔·阿姆斯特朗描述为第二个在月球上行走的人，而专家答案指出他是第一个。

步骤3：输出一个结构如下的JSON对象：{"重叠类型": "有部分交集", "矛盾": "真"}。
```
{% endcode %}

<figure><img src="../.gitbook/assets/image(30).png" alt="" /><figcaption></figcaption></figure>

这是一个示例输入，其中的答案是正确的，但提供的详细信息稍微超出了必要范围，提示语：

{% code overflow="wrap" %}
```
请按照以下步骤处理用户的输入。在进行下一步前，请详细复述每个步骤，例如：“步骤1：逐步推理...”。

步骤1：逐步推理提交的答案与专家答案中的信息是否为以下几种情况之一：不相交、完全相等、是子集（即提交的答案信息比专家答案少）、是超集（即提交的答案信息比专家答案多），或有部分交集（即有一些交集，但并非子集或超集）。

步骤2：逐步推理提交的答案是否与专家答案的任何部分产生矛盾。

步骤3：输出一个结构如下的JSON对象：{"重叠类型": "不相交" 或 "完全相等" 或 "是子集" 或 "是超集" 或 "有部分交集", "矛盾": "真" 或 "假"}。

用户输入：
"""
问题：“尼尔·阿姆斯特朗最为人所知的事件是什么？它在什么时候发生的？假设使用UTC时间。”

提交的答案：“1969年7月21日，约在02:56UTC时间，尼尔·阿姆斯特朗成为第一个踏上月球表面的人类，这标志着人类历史上的一个重大成就。”

专家的答案：“尼尔·阿姆斯特朗最为人所知的是他成为第一个在月球上行走的人。这个历史性的事件发生在1969年7月21日。”
"""
```
{% endcode %}

小语 4.0 回复：

{% code overflow="wrap" %}
```
步骤1：逐步推理提交的答案与专家答案中的信息情况为：是超集（即提交的答案信息比专家答案多）。

步骤2：逐步推理提交的答案与专家答案的任何部分没有产生矛盾。

步骤3：输出一个结构如下的JSON对象：{"重叠类型": "是超集", "矛盾": "假"}。
```
{% endcode %}

<figure><img src="../.gitbook/assets/image(22).png" alt="" /><figcaption></figcaption></figure>
